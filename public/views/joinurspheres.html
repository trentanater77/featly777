<html>
<head>
  <title>JoinUrSpheres Rooms</title>
</head>
<body>

  <h1>Available Rooms</h1>
<h2>keep in mind upon joining the room link it will ask for description and room limit just put anything only if you are joining a room not creating it!</h2>

  

  <div id="room-list">
  </div>
<script>
   fetch('https://chatspheres.com/api/rooms')
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    if (!data.rooms) {
      console.error('No rooms property in response data');
      return;
    }

    const roomList = document.getElementById('room-list');

  data.rooms.forEach(room => {
  const roomElement = document.createElement('div');

  const roomLink = document.createElement('a');
 roomLink.href = room.current_peers >= room.room_limit ? '#' : `https://chatspheres.com/join/${room.id}`;

  roomLink.textContent = room.current_peers >= room.room_limit ? 'Room is Full' : `Join Room ${room.id}`; // Check if the room is full

  const roomDescription = document.createElement('p');
  roomDescription.textContent = `Description: ${room.description}`;

  const roomLimit = document.createElement('p');
  roomLimit.textContent = `Room Limit: ${room.room_limit}`;

  const currentPeers = document.createElement('p'); // Create paragraph element for current peers
  currentPeers.textContent = `Current Peers: ${room.current_peers}`; // Set the text to the current number of peers

  roomElement.appendChild(roomLink);
  roomElement.appendChild(roomDescription);
  roomElement.appendChild(roomLimit);
  roomElement.appendChild(currentPeers); // Append the current peers to the div
  roomList.appendChild(roomElement);
});


  })
  .catch(error => {
    console.error('There was a problem with the fetch operation:', error);
  });
</script>


</body>
</html>
